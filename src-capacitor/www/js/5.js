(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1bcf":function(t,e,s){"use strict";s("c74a")},"294e":function(t,e,s){},"51b3":function(t,e,s){"use strict";s("c74f")},5519:function(t,e,s){"use strict";s("294e")},c52c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"bg-white text-white"},[t.$q.platform.is.desktop?s("div",[s("desktop")],1):t._e(),t.$q.platform.is.mobile?s("div",[s("mobile")],1):t._e()])},l=[],i=s("c427"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{staticClass:"bg-white profileminfix"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-2 col-md-3 mt-vh-4"},[s("q-followings")],1),t.auth?s("div",{staticClass:"col-lg-7 col-md-5 mt-vh-4 d-flex justify-content-center fullpageMT"},[s("q-scroll-area",{staticClass:"w-60 h-100 m-mx-auto",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},[s("div",{staticClass:"row"},[t.isModel?s("q-avatar",{staticClass:"disabledivinavatar",attrs:{size:"15vh"}},[null==t.ava?s("q-img",{staticClass:"q-pa-none",attrs:{src:t.thisModel.avatars}},[s("q-file",{staticClass:"w-100 h-100 q-pa-none h-auto-fix",attrs:{accept:".jpg, image/*",outlined:""},on:{input:function(e){return t.getImgBase64()}},model:{value:t.ava,callback:function(e){t.ava=e},expression:"ava"}})],1):s("q-img",{staticClass:"q-pa-none",attrs:{src:t.base64ava}},[s("q-file",{staticClass:"w-100 h-100 q-pa-none h-auto-fix",attrs:{accept:".jpg, image/*",outlined:""},on:{input:function(e){return t.getImgBase64()}},model:{value:t.ava,callback:function(e){t.ava=e},expression:"ava"}})],1)],1):s("q-btn",{staticClass:"roundetnorm",attrs:{rounded:""},on:{click:function(e){return t.getAvatarsStandart()}}},[s("q-avatar",{staticClass:"disabledivinavatar",attrs:{size:"15vh"}},[null==t.newava?s("q-img",{staticClass:"q-pa-none",attrs:{src:t.thisModel.avatars}}):s("q-img",{staticClass:"q-pa-none",attrs:{src:t.newava}})],1)],1),s("div",{staticClass:"row h-mc mt-vh-2 flex-1"},[s("div",{staticClass:"col q-mb-none ml-vw-1"},[s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-black h-mc text-weight-bold text-30 q-ma-none"},[t._v("\n                  "+t._s(t.thisModel.name)+"\n                ")])]),s("p",{staticClass:"text-black h-mc text-comment-18 q-ma-none"},[t._v("\n                @"+t._s(t.username)+"\n              ")])])])],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black"},[t._v("Имя")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetName=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.thisModel.name))])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black"},[t._v("Имя Пользователя")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetUserName=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.username))])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black q-ma-none"},[t._v("Пароль")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetPassword=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                ***********\n              ")])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black q-ma-none"},[t._v("Почта")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetEmail=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.thisModel.email)+"\n              ")])],1)],1)],1),t.isModel?s("div",{staticClass:"mt-vh-4 mb-vh-4"},[s("q-btn",{staticClass:"fixbtn",attrs:{unelevated:"",rounded:"",color:"pink-6"},on:{click:function(e){return t.getstreamkeyOB()}}},[s("p",{staticClass:"mr-vw-1 ml-vw-1 text-white text-comment-14 q-ma-none text-initial"},[t._v("\n              Stream key\n            ")])]),t.submitResult.status?s("q-card",{staticClass:"q-mt-md bg-grey-white",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"text-black text-comment-16 flex-center-between"},[t._v("Описания для OBS:\n            ")]),s("q-separator"),s("q-card-section",[s("q-input",{attrs:{readonly:"","label-slot":""},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"content_paste"},on:{click:t.copy}})]},proxy:!0}],null,!1,4166166499),model:{value:t.streamingUrl,callback:function(e){t.streamingUrl=e},expression:"streamingUrl"}})],1),s("q-separator"),s("q-input",{attrs:{filled:"",autogrow:"",readonly:"","label-slot":""},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"content_paste"},on:{click:t.copy2}})]},proxy:!0}],null,!1,3950021681),model:{value:t.submitResult.value,callback:function(e){t.$set(t.submitResult,"value",e)},expression:"submitResult.value"}})],1):t._e()],1):t._e(),t.isModel?t._e():s("q-btn",{staticClass:"mt-vh-4 fixbtn",attrs:{unelevated:"",rounded:"",color:"pink-6",to:"/become_a_model"}},[s("p",{staticClass:"mr-vw-1 ml-vw-1 text-white text-comment-14 q-ma-none text-initial"},[t._v("\n            Стать моделью\n          ")])])],1)],1):s("div",{staticClass:"flex justify-center q-mt-xl text-black col"},[s("h5")]),s("q-listrec")],1),s("q-dialog",{attrs:{"content-style":"dialog","content-class":"card-bg "},on:{hide:function(e){return t.clearAll()}},model:{value:t.dialogmain,callback:function(e){t.dialogmain=e},expression:"dialogmain"}},[s("q-card",{staticClass:"mw-i vw-25 rounded-14",attrs:{flat:""}},[s("div",[t.resetName?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить имя\n        ")]):t.resetUserName?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить имя пользователя\n        ")]):t.resetPassword?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить пароль\n        ")]):t.resetEmail?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить Email\n        ")]):t._e(),s("q-separator"),s("q-form",[t.resetName?s("q-input",{ref:"user",staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Ваше новое имя",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"text",rules:[function(t){return t&&t.length>3||"Поле пустое или меньше 3 символов"}]},model:{value:t.resetNameLabel,callback:function(e){t.resetNameLabel=e},expression:"resetNameLabel"}}):t.resetUserName?s("q-input",{ref:"user",staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Ваш новое имя пользователя",outlined:"","lazy-rules":"",mask:"@xxxxxxxxxxxxxxx","input-class":"text-body1 q-ml-xs",type:"text",rules:[function(t){return t&&t.length>3||"Поле пустое или меньше 3 символов"}]},model:{value:t.resetUserNameLabel,callback:function(e){t.resetUserNameLabel=e},expression:"resetUserNameLabel"}}):t.resetPassword?s("div",[s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Новый пароль",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"password",rules:[function(t){return t&&t.length>3||"Пароль должен быть более 3 символов"}]},model:{value:t.resetPasswordLabel,callback:function(e){t.resetPasswordLabel=e},expression:"resetPasswordLabel"}}),s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Повторите пароль",outlined:"",type:"password","input-class":"text-body1 q-ml-xs","lazy-rules":"",rules:[function(e){return e&&e.length>3&&e==t.resetPasswordLabel||"Пароли не совпадают"}]},model:{value:t.resetTryPasswordLabel,callback:function(e){t.resetTryPasswordLabel=e},expression:"resetTryPasswordLabel"}})],1):t.resetEmail?s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Email",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"email",rules:[function(e){return t.validateEmail(e)&&e.length>0||"Укажите email"}]},model:{value:t.resetEmailLabel,callback:function(e){t.resetEmailLabel=e},expression:"resetEmailLabel"}}):t._e(),s("q-separator",{staticClass:"mt-vh-5"}),s("q-card-actions",{staticClass:"d-flex q-pa-none flex-nowrap",attrs:{align:"around"}},[s("q-btn",{staticClass:"w-50 text-comment-14 h-vh-1080-50px",attrs:{label:"Отменить","text-color":"black",flat:""},on:{click:function(e){return t.clearAll()}}}),s("q-separator",{attrs:{vertical:""}}),s("q-btn",{staticClass:"w-50 text-comment-14 h-vh-1080-50px",attrs:{label:"Сохранить","text-color":"black",flat:"",disable:!t.validatedisable()},on:{click:function(e){return t.controllerSend()}}})],1)],1)],1)])],1)],1)},r=[],o=s("ded3"),c=s.n(o),m=s("cdde"),u=s("18d6"),h=s("2f62"),d={name:"App",components:{},data(){return{streamingUrl:"rtmp://rtmp.cg.house/liveHD",showkey:!1,dialogmain:!1,resetName:!1,resetUserName:!1,resetPassword:!1,resetEmail:!1,resetNameLabel:null,resetUserNameLabel:null,resetPasswordLabel:null,resetTryPasswordLabel:null,resetEmailLabel:null,isModel:!1,balance:null,withdrawDialog:!1,currency:null,amount:null,depositDialog:!1,yad:!1,amount_deposit:null,order_id:0,listavatars:null,recModels:5,modelall_video:0,subscribList:null,subscribListL:!1,playedid:null,ava:null,base64ava:null,newava:null,token:null,username:null,userid:null,name:u["a"].getItem("name"),readerFile:new FileReader,submitResult:{status:!1,value:null},thisModel:{avatars:null,createdAt:null,is_vip:null,name:null,pub_streamid:null,sec_streamid:null,updatedAt:null,email:null,videos:{}},thumbStyle:{display:"none"},barStyle:{display:"none"},controls:["play-large","restart","rewind","play","fast-forward","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","download","fullscreen"]}},computed:c()({},Object(h["b"])(["pcm"])),sockets:{getstreamkey(t){this.submitResult.status=t.status,this.submitResult.value=t.key},cl_authcontroll:function(t){"auth"==t.massage?this.auth=!0:"deauth"==t.massage&&(this.auth=!1)},cl_subscribeControle:function(t){"ok"==t.status&&(this.recModels[t.index].issubscribe=!0,this.$q.notify({color:"pink-6",message:"Подписка на "+t.name+" оформлена"})),"removed"==t.status&&(this.recModels[t.index].issubscribe=!1,this.$q.notify({color:"pink-6",message:"Вы отказались от подписки на "+t.name})),"error"==t.status&&"you can not follow your self"==t.log&&this.$q.notify({color:"pink-6",message:"Вы не можете подписаться сами на себя "})},cl_getuserinfos:function(t){console.log(t),this.thisModel=t,this.username!=t.username&&(null==t.username&&""==t.username||(this.username=t.username,this.resetUserNameLabel=t.username)),this.thisModel.name!=t.name&&(null==t.name&&""==t.name||(this.thisModel.name=t.name,this.resetNameLabel=t.name)),this.thisModel.name!=t.email&&(null==t.email&&""==t.email||(this.resetEmailLabel=t.email,this.thisModel.email=t.email))},cl_changet:function(t){"ok"==t.status?(this.$socket.emit("getuserinfo",{token:this.pcm.user.tk,username:this.pcm.user.un}),Object(i["a"])({method:"get",url:"/models",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.recModels=t.data}))):this.$q.notify("Возникла непредвиденная ошибка")}},beforeMount(){this.token=this.pcm.user.tk,this.username=this.pcm.user.un,this.userid=this.pcm.user.id,this.auth=this.pcm.auth,this.isModel=this.pcm.user.rol,0==this.auth?this.$router.push("/"):(this.$socket.emit("s_chagePage",{page:"index"}),this.$socket.emit("getuserinfo",{token:this.pcm.user.tk,username:this.pcm.user.un}),Object(i["a"])({method:"post",url:"/getavatars",data:{size:10}}).then((t=>{this.listavatars=t.data})),Object(i["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.balance=t.data.balance})))},mounted(){},created(){},beforeCreate(){},methods:{copy(t){Object(m["a"])(this.streamingUrl),this.$q.notify({color:"pink-6",message:"Ключ скопирован в буфер обмена"})},copy2(t){Object(m["a"])(this.submitResult.value),this.$q.notify({color:"pink-6",message:"URL скопирован в буфер обмена"})},getstreamkeyOB(){this.$socket.emit("streamkey",{token:this.pcm.user.tk})},subscribe(t,e,s){this.$socket.emit("subscribeControle",{sender:this.pcm.user.id,receiver:t,token:this.pcm.user.tk,index:s})},getAvatarsStandart(){function t(t){return Math.floor(Math.random()*Math.floor(t))}var e=t(19);this.newava=this.listavatars[e],this.$socket.emit("changeuseravatar",{token:this.pcm.user.tk,src:this.newava})},validatedisable(){return this.resetName?null!=this.resetNameLabel&&this.resetNameLabel.length>3:this.resetUserName?null!=this.resetUserNameLabel&&this.resetUserNameLabel.length>3:this.resetPassword?null!==this.resetPasswordLabel&&null!=this.resetTryPasswordLabel&&(this.resetPasswordLabel.length>3&&this.resetPasswordLabel==this.resetTryPasswordLabel):!!this.resetEmail&&this.validateEmail(this.resetEmailLabel)},setchange(t){if("ImgSend"==t){if(null==this.base64ava)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setAvatar",new:this.base64ava})}else if("newName"==t){if(null==this.resetNameLabel||this.resetNameLabel.lenght<3)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setName",new:this.resetNameLabel}),this.resetName=!1,this.dialogmain=!1}else if("newUserName"==t){if(null==this.resetUserNameLabel||this.resetUserNameLabel.lenght<3)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setUsername",new:this.resetUserNameLabel}),this.resetUserName=!1,this.dialogmain=!1}else if("newPassword"==t){if(null==this.resetPasswordLabel||this.resetPasswordLabel.lenght<3||this.resetPasswordLabel!=this.resetTryPasswordLabel)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setPassword",new:this.resetPasswordLabel}),this.resetPassword=!1,this.dialogmain=!1}else if("newEmail"==t){if(!this.validateEmail(this.resetEmailLabel))return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setEmail",new:this.resetEmailLabel}),this.resetEmail=!1,this.dialogmain=!1}},controllerSend(){if(this.resetName)this.setchange("newName");else if(this.resetUserName)this.setchange("newUserName");else if(this.resetPassword)this.setchange("newPassword");else{if(!this.resetEmail)return void this.$q.notify("Возникла непредвиденная ошибка");this.setchange("newEmail")}},validateEmail(t){const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())},clearAll(){this.dialogmain=!1,this.resetName=!1,this.resetUserName=!1,this.resetPassword=!1,this.resetEmail=!1,this.resetNameLabel=this.thisModel.name,this.resetUserNameLabel=this.thisModel.username,this.resetEmailLabel=this.thisModel.email},getImgBase64(){this.readerFile.readAsDataURL(this.ava),this.readerFile.onload=t=>{this.base64ava=this.readerFile.result,this.setchange("ImgSend")}},debug(){},depositstart(){Object(i["a"])({method:"get",url:"/depositstart",headers:{"x-access-token":this.pcm.user.tk,amount:this.amount_deposit}}).then((t=>{this.order_id=t.data.link.id,this.yad=!0,console.log(t.data)}))},withdraw(){this.withdialog=!1,Object(i["a"])({method:"get",url:"/withdraw",headers:{"x-access-token":this.pcm.user.tk,amount:parseFloat(this.amount),currency:this.currency}}).then((t=>{console.log(t),this.alert=t.data.status,"done"==t.data.status?location.reload():this.$q.notify({color:"negative",message:"Что-то пошло не так!"})}))}}},b=d,p=(s("5519"),s("2877")),v=s("4d5a"),x=s("4983"),g=s("cb32"),f=s("068f"),q=s("7d53"),w=s("9c40"),k=s("66e5"),y=s("4074"),C=s("0170"),L=s("f09f"),_=s("a370"),N=s("eb85"),P=s("27f9"),$=s("0016"),U=s("1c1c"),M=s("24e8"),E=s("0378"),Q=s("4b7e"),S=s("714f"),A=s("eebe"),O=s.n(A),j=Object(p["a"])(b,n,r,!1,null,null,null),I=j.exports;O()(j,"components",{QLayout:v["a"],QScrollArea:x["a"],QAvatar:g["a"],QImg:f["a"],QFile:q["a"],QBtn:w["a"],QItem:k["a"],QItemSection:y["a"],QItemLabel:C["a"],QCard:L["a"],QCardSection:_["a"],QSeparator:N["a"],QInput:P["a"],QIcon:$["a"],QList:U["a"],QDialog:M["a"],QForm:E["a"],QCardActions:Q["a"]}),O()(j,"directives",{Ripple:S["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{staticClass:"bg-white profileminfix"},[s("q-toolbar",{staticClass:"text-black q-gutter-xs"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back",size:"2vh"},on:{click:function(e){return t.routeback()}}}),s("q-toolbar-title",{staticClass:"text-center text-30"},[t._v(t._s(t.thisModel.name))]),s("q-fab",{attrs:{icon:"more_horiz",direction:"down","vertical-actions-align":"right"}},[s("q-fab-action",{staticClass:"w-fav",attrs:{color:"pink-3",outline:"","text-color":"black",label:"Выйти",icon:"power_settings_new"},on:{click:function(e){return t.logout()}}})],1)],1),s("q-separator"),t.auth?t._e():s("div",{staticClass:"flex justify-center q-mt-xl text-black col"},[s("h5")]),t.auth?s("div",{staticClass:"col-lg-7 col-md-5 mt-vh-4 d-flex justify-content-center fullpageMT"},[s("q-scroll-area",{staticClass:"w-100 h-100 q-mx-md",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},[s("div",{staticClass:"row"},[t.isModel?s("q-avatar",{staticClass:"disabledivinavatar",attrs:{size:"15vh"}},[null==t.ava?s("q-img",{staticClass:"q-pa-none",attrs:{src:t.thisModel.avatars}},[s("q-file",{staticClass:"w-100 h-100 q-pa-none h-auto-fix",attrs:{accept:".jpg, image/*",outlined:""},on:{input:function(e){return t.getImgBase64()}},model:{value:t.ava,callback:function(e){t.ava=e},expression:"ava"}})],1):s("q-img",{staticClass:"q-pa-none",attrs:{src:t.base64ava}},[s("q-file",{staticClass:"w-100 h-100 q-pa-none h-auto-fix",attrs:{accept:".jpg, image/*",outlined:""},on:{input:function(e){return t.getImgBase64()}},model:{value:t.ava,callback:function(e){t.ava=e},expression:"ava"}})],1)],1):s("q-btn",{staticClass:"roundetnorm",attrs:{rounded:""},on:{click:function(e){return t.getAvatarsStandart()}}},[s("q-avatar",{staticClass:"disabledivinavatar",attrs:{size:"15vh"}},[null==t.newava?s("q-img",{staticClass:"q-pa-none",attrs:{src:t.thisModel.avatars}}):s("q-img",{staticClass:"q-pa-none",attrs:{src:t.newava}})],1)],1),s("div",{staticClass:"row h-mc mt-vh-2 flex-1"},[s("div",{staticClass:"col q-mb-none ml-vw-1"},[s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-black h-mc text-weight-bold text-30 q-ma-none"},[t._v("\n                  "+t._s(t.thisModel.name)+"\n                ")])]),s("p",{staticClass:"text-black h-mc text-comment-18 q-ma-none"},[t._v("\n                @"+t._s(t.username)+"\n              ")])])])],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black"},[t._v("Имя")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetName=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.thisModel.name))])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black"},[t._v("Имя Пользователя")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetUserName=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.username))])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black q-ma-none"},[t._v("Пароль")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetPassword=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                ***********\n              ")])],1)],1)],1),s("div",{staticClass:"mt-vh-2"},[s("p",{staticClass:"text-fxl text-weight-bold text-black q-ma-none"},[t._v("Почта")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"mt-vh-2 q-pl-none",attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{staticClass:"text-black h-mc ml-auto",attrs:{flat:"",icon:"create",color:"pink-6"},on:{click:function(e){t.dialogmain=!0,t.resetEmail=!0}}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-body1 text-weight-regular gray-1337",attrs:{title:"Разрешить подглядывания"}},[t._v("\n                "+t._s(t.thisModel.email)+"\n              ")])],1)],1)],1),t.isModel?s("div",{staticClass:"mt-vh-4 mb-vh-4"},[s("q-btn",{staticClass:"full-width q-mt-md",attrs:{label:"OBS потоковая информация:",outline:"",rounded:"","text-color":"pink",loading:t.btnObs},on:{click:function(e){return t.getstreamkeyOB()}},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner-radio")]},proxy:!0}],null,!1,2965018547)}),t.submitResult.status?s("q-card",{staticClass:"q-mt-md bg-grey-white",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"text-black text-comment-16 flex-center-between"},[t._v("Описания для OBS:\n            ")]),s("q-separator"),s("q-card-section",[s("q-input",{attrs:{readonly:"","label-slot":""},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"content_paste"},on:{click:t.copy}})]},proxy:!0}],null,!1,4166166499),model:{value:t.streamingUrl,callback:function(e){t.streamingUrl=e},expression:"streamingUrl"}})],1),s("q-separator"),s("q-input",{attrs:{filled:"",autogrow:"",readonly:"","label-slot":""},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"content_paste"},on:{click:t.copy2}})]},proxy:!0}],null,!1,3950021681),model:{value:t.submitResult.value,callback:function(e){t.$set(t.submitResult,"value",e)},expression:"submitResult.value"}})],1):t._e()],1):t._e(),t.isModel?t._e():s("q-btn",{staticClass:"row q-mt-lg fixbtn q-px-md q-mx-auto",attrs:{unelevated:"",rounded:"",color:"pink-6",label:"Стать моделью",to:"/become_a_model"}})],1)],1):s("div",{staticClass:"flex justify-center q-mt-xl text-black col"},[s("h5")]),s("q-dialog",{attrs:{"content-style":"dialog","content-class":"card-bg "},on:{hide:function(e){return t.clearAll()}},model:{value:t.dialogmain,callback:function(e){t.dialogmain=e},expression:"dialogmain"}},[s("q-card",{staticClass:"mw-i w-100 rounded-14",attrs:{flat:""}},[s("div",[t.resetName?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить имя\n        ")]):t.resetUserName?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить имя пользователя\n        ")]):t.resetPassword?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить пароль\n        ")]):t.resetEmail?s("p",{staticClass:"q-mt-none mb-vh-2 mt-vh-2 text-fxl text-center"},[t._v("\n          Изменить Email\n        ")]):t._e(),s("q-separator"),s("q-form",[t.resetName?s("q-input",{ref:"user",staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Ваше новое имя",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"text",rules:[function(t){return t&&t.length>3||"Поле пустое или меньше 3 символов"}]},model:{value:t.resetNameLabel,callback:function(e){t.resetNameLabel=e},expression:"resetNameLabel"}}):t.resetUserName?s("q-input",{ref:"user",staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Ваш новое имя пользователя",outlined:"","lazy-rules":"",mask:"@xxxxxxxxxxxxxxx","input-class":"text-body1 q-ml-xs",type:"text",rules:[function(t){return t&&t.length>3||"Поле пустое или меньше 3 символов"}]},model:{value:t.resetUserNameLabel,callback:function(e){t.resetUserNameLabel=e},expression:"resetUserNameLabel"}}):t.resetPassword?s("div",[s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Новый пароль",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"password",rules:[function(t){return t&&t.length>3||"Пароль должен быть более 3 символов"}]},model:{value:t.resetPasswordLabel,callback:function(e){t.resetPasswordLabel=e},expression:"resetPasswordLabel"}}),s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Повторите пароль",outlined:"",type:"password","input-class":"text-body1 q-ml-xs","lazy-rules":"",rules:[function(e){return e&&e.length>3&&e==t.resetPasswordLabel||"Пароли не совпадают"}]},model:{value:t.resetTryPasswordLabel,callback:function(e){t.resetTryPasswordLabel=e},expression:"resetTryPasswordLabel"}})],1):t.resetEmail?s("q-input",{staticClass:"mt-vh-5 text-body1 q-ml-xs mx-vw-1 h-vh-4-st q-pa-none",attrs:{label:"Email",outlined:"","lazy-rules":"","input-class":"text-body1 q-ml-xs",type:"email",rules:[function(e){return t.validateEmail(e)&&e.length>0||"Укажите email"}]},model:{value:t.resetEmailLabel,callback:function(e){t.resetEmailLabel=e},expression:"resetEmailLabel"}}):t._e(),s("q-separator",{staticClass:"mt-vh-5"}),s("q-card-actions",{staticClass:"d-flex q-pa-none flex-nowrap",attrs:{align:"around"}},[s("q-btn",{staticClass:"w-50 text-comment-14 h-vh-1080-50px",attrs:{label:"Отменить","text-color":"black",flat:""},on:{click:function(e){return t.clearAll()}}}),s("q-separator",{attrs:{vertical:""}}),s("q-btn",{staticClass:"w-50 text-comment-14 h-vh-1080-50px",attrs:{label:"Сохранить","text-color":"black",flat:"",disable:!t.validatedisable()},on:{click:function(e){return t.controllerSend()}}})],1)],1)],1)])],1)],1)},z=[],T=(s("5319"),{name:"App",components:{},data(){return{streamingUrl:"rtmp://rtmp.cg.house/live",showkey:!1,dialogmain:!1,resetName:!1,resetUserName:!1,resetPassword:!1,resetEmail:!1,btnObs:!1,resetNameLabel:null,resetUserNameLabel:null,resetPasswordLabel:null,resetTryPasswordLabel:null,resetEmailLabel:null,isModel:!1,balance:null,username:null,withdrawDialog:!1,currency:null,amount:null,depositDialog:!1,yad:!1,amount_deposit:null,order_id:0,listavatars:null,recModels:5,modelall_video:0,subscribList:null,subscribListL:!1,playedid:null,ava:null,base64ava:null,newava:null,token:null,userid:null,name:u["a"].getItem("name"),auth:!1,readerFile:new FileReader,submitResult:{status:!1,value:null},thisModel:{avatars:null,createdAt:null,is_vip:null,name:null,pub_streamid:null,sec_streamid:null,updatedAt:null,email:null,videos:{}},thumbStyle:{display:"none"},barStyle:{display:"none"},controls:["play-large","restart","rewind","play","fast-forward","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","download","fullscreen"]}},computed:c()({},Object(h["b"])(["pcm"])),sockets:{getstreamkey(t){this.submitResult.status=t.status,this.submitResult.value=t.key,this.btnObs=!1},cl_authcontroll:function(t){"auth"==t.massage?this.auth=!0:"deauth"==t.massage&&(this.auth=!1)},cl_subscribeControle:function(t){"ok"==t.status&&(this.recModels[t.index].issubscribe=!0,this.$q.notify({color:"pink-6",message:"Подписка на "+t.name+" оформлена"})),"removed"==t.status&&(this.recModels[t.index].issubscribe=!1,this.$q.notify({color:"pink-6",message:"Вы отказались от подписки на "+t.name})),"error"==t.status&&"you can not follow your self"==t.log&&this.$q.notify({color:"pink-6",message:"Вы не можете подписаться сами на себя "})},cl_getuserinfos:function(t){console.log(t),this.thisModel=t,this.username!=t.username&&(null==t.username&&""==t.username||(this.username=t.username,this.resetUserNameLabel=t.username)),this.thisModel.name!=t.name&&(null==t.name&&""==t.name||(this.thisModel.name=t.name,this.resetNameLabel=t.name)),this.thisModel.name!=t.email&&(null==t.email&&""==t.email||(this.resetEmailLabel=t.email,this.thisModel.email=t.email))},cl_changet:function(t){"ok"==t.status?(this.$socket.emit("getuserinfo",{token:this.pcm.user.tk,username:this.pcm.user.un}),Object(i["a"])({method:"get",url:"/models",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.recModels=t.data}))):this.$q.notify("Возникла непредвиденная ошибка")}},beforeMount(){this.isModel=this.pcm.user.rol,this.auth=this.pcm.auth,this.pcm.auth?(Object(i["a"])({method:"post",url:"/getavatars",data:{size:10}}).then((t=>{this.listavatars=t.data})),this.$nextTick((()=>{this.$socket.emit("s_chagePage",{page:"index"}),this.$socket.emit("getuserinfo",{token:this.pcm.user.tk,username:this.pcm.user.un}),Object(i["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.balance=t.data.balance}))}))):this.$router.push("/")},mounted(){},created(){},beforeCreate(){},methods:{routeback(){this.$router.push("/")},copy(t){Object(m["a"])(this.streamingUrl),this.$q.notify({color:"pink-6",message:"Ключ скопирован в буфер обмена"})},copy2(t){Object(m["a"])(this.submitResult.value),this.$q.notify({color:"pink-6",message:"URL скопирован в буфер обмена"})},getstreamkeyOB(){this.btnObs=!0,this.$socket.emit("streamkey",{token:this.pcm.user.tk})},subscribe(t,e,s){this.$socket.emit("subscribeControle",{sender:this.pcm.user.id,receiver:t,token:this.pcm.user.tk,index:s})},getAvatarsStandart(){function t(t){return Math.floor(Math.random()*Math.floor(t))}var e=t(19);this.newava=this.listavatars[e],this.$socket.emit("changeuseravatar",{token:this.pcm.user.tk,src:this.newava})},validatedisable(){return this.resetName?null!=this.resetNameLabel&&this.resetNameLabel.length>3:this.resetUserName?null!=this.resetUserNameLabel&&this.resetUserNameLabel.length>3:this.resetPassword?null!==this.resetPasswordLabel&&null!=this.resetTryPasswordLabel&&(this.resetPasswordLabel.length>3&&this.resetPasswordLabel==this.resetTryPasswordLabel):!!this.resetEmail&&this.validateEmail(this.resetEmailLabel)},setchange(t){if("ImgSend"==t){if(null==this.base64ava)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setAvatar",new:this.base64ava})}else if("newName"==t){if(null==this.resetNameLabel||this.resetNameLabel.lenght<3)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setName",new:this.resetNameLabel}),this.resetName=!1,this.dialogmain=!1}else if("newUserName"==t){if(null==this.resetUserNameLabel||this.resetUserNameLabel.lenght<3)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setUsername",new:this.resetUserNameLabel}),this.resetUserName=!1,this.dialogmain=!1}else if("newPassword"==t){if(null==this.resetPasswordLabel||this.resetPasswordLabel.lenght<3||this.resetPasswordLabel!=this.resetTryPasswordLabel)return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setPassword",new:this.resetPasswordLabel}),this.resetPassword=!1,this.dialogmain=!1}else if("newEmail"==t){if(!this.validateEmail(this.resetEmailLabel))return void this.$q.notify("Возникла непредвиденная ошибка");this.$socket.emit("settings",{token:this.pcm.user.tk,type:"setEmail",new:this.resetEmailLabel}),this.resetEmail=!1,this.dialogmain=!1}},controllerSend(){if(this.resetName)this.setchange("newName");else if(this.resetUserName)this.setchange("newUserName");else if(this.resetPassword)this.setchange("newPassword");else{if(!this.resetEmail)return void this.$q.notify("Возникла непредвиденная ошибка");this.setchange("newEmail")}},validateEmail(t){const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())},clearAll(){this.dialogmain=!1,this.resetName=!1,this.resetUserName=!1,this.resetPassword=!1,this.resetEmail=!1,this.resetNameLabel=this.thisModel.name,this.resetUserNameLabel=this.thisModel.username,this.resetEmailLabel=this.thisModel.email},getImgBase64(){this.readerFile.readAsDataURL(this.ava),this.readerFile.onload=t=>{this.base64ava=this.readerFile.result,this.setchange("ImgSend")}},debug(){},depositstart(){Object(i["a"])({method:"get",url:"/depositstart",headers:{"x-access-token":this.pcm.user.tk,amount:this.amount_deposit}}).then((t=>{this.order_id=t.data.link.id,this.yad=!0,console.log(t.data)}))},logout(){Object(i["a"])({method:"get",url:"/logout",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{u["a"].set("token",null),u["a"].set("username",null),u["a"].set("userid",null),u["a"].set("name",null),this.nologin=!0,this.nnologin=!1,location.replace("/")}))},withdraw(){this.withdialog=!1,Object(i["a"])({method:"get",url:"/withdraw",headers:{"x-access-token":this.pcm.user.tk,amount:parseFloat(this.amount),currency:this.currency}}).then((t=>{console.log(t),this.alert=t.data.status,"done"==t.data.status?location.reload():this.$q.notify({color:"negative",message:"Что-то пошло не так!"})}))}}}),F=T,B=(s("1bcf"),s("65c6")),D=s("6ac5"),Z=s("c294"),J=s("72db"),H=s("9569"),G=Object(p["a"])(F,R,z,!1,null,null,null),K=G.exports;O()(G,"components",{QLayout:v["a"],QToolbar:B["a"],QBtn:w["a"],QToolbarTitle:D["a"],QFab:Z["a"],QFabAction:J["a"],QSeparator:N["a"],QScrollArea:x["a"],QAvatar:g["a"],QImg:f["a"],QFile:q["a"],QItem:k["a"],QItemSection:y["a"],QItemLabel:C["a"],QSpinnerRadio:H["a"],QCard:L["a"],QCardSection:_["a"],QInput:P["a"],QIcon:$["a"],QDialog:M["a"],QForm:E["a"],QCardActions:Q["a"]}),O()(G,"directives",{Ripple:S["a"]});var V={name:"PageIndex",components:{desktop:I,mobile:K}},W=V,X=(s("51b3"),s("9989")),Y=Object(p["a"])(W,a,l,!1,null,null,null);e["default"]=Y.exports;O()(Y,"components",{QPage:X["a"]})},c74a:function(t,e,s){},c74f:function(t,e,s){}}]);
//# sourceMappingURL=5.js.map