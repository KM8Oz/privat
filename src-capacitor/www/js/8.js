(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"2e7c":function(t,e,s){"use strict";s("7416")},"35b0d":function(t,e,s){"use strict";s("ad34")},"67f5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"bg-black"},[t.$q.platform.is.desktop?s("div",{staticClass:"desktop-only"},[s("desktop")],1):t._e(),t.$q.platform.is.mobile?s("div",{staticClass:"mobile-only"},[s("mobile")],1):t._e()])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{class:t.pcm.controls.dark?"bg-dark":"bg-white"},[a("div",{staticClass:"row",staticStyle:{"min-height":"inherit"}},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"full-width row justify-end"}),t._e(),a("div",{staticClass:"fullpage"},[a("q-hls",{attrs:{src:t.src,wps:100,hps:100,c:!0}})],1),a("div",{staticClass:"text-white flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row",staticStyle:{height:"50vh","max-width":"25vw"}},[a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg"},[t._v("Модель в привате")])])])]),a("div",{staticClass:"col-4"},[a("div",[a("q-card",{class:"text-black no-shadow "+(t.pcm.controls.dark?"bg-dark":"bg-white")+" "},[a("q-card-section",{class:"q-ma-none q-pa-none "+(t.pcm.controls.dark?"text-white":"text-dark")},[a("q-card-section",{staticClass:"q-ma-none q-pa-none"},[a("div",{staticClass:"row justify-between items-center mt-vh-3"},[a("div",{staticClass:"row ml-vw-05"},[a("q-avatar",{attrs:{size:"5.16vh"}},[a("img",{staticClass:"bordavatar",attrs:{src:t.modelavatar}})]),t.datamodel?a("div",{staticClass:"row ml-vw-05"},[a("p",{staticClass:"col-12 q-mb-none text-subtitle1 mt-vh-05 text-nowrap"},[t._v("\n                      "+t._s(t.datamodel.modelname)+"\n                      "),a("q-badge",{staticClass:"q-ml-sm q-mb-none",attrs:{color:"pink-6",align:"middle"}},[a("span",{staticClass:"dot q-mr-xs bg-white"}),t._v(" live\n                      ")])],1),a("p",{staticClass:"text-grey-8 col-12 cuttext text-nowrap text-comment-14 q-mb-none h-vh-3"},[t._v("\n                      @"+t._s(t.datamodel.UuserId.username)+"\n                    ")])]):t._e(),"enabled"==t.vibroenable?a("q-icon",[a("q-img",{attrs:{src:s("cb1d")}})],1):t._e()],1)]),a("div",{staticClass:"col text-max2-16 ml-vw-05 q-pl-xs"},[a("p",{staticClass:"text-body1 q-my-none text-weight-light"},[t._v(t._s(t.streamDesc))]),a("p",{staticClass:"text-body1 q-my-none text-weight-light"},[t._v("\n                  "+t._s(t.tags)+"\n                ")])])]),a("div",{staticClass:"row q-mt-xs"},[a("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"видеозвонок",color:"pink-6"},on:{click:function(e){t.privateStart=!0}}}),t.is_private_chat?a("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"закрывать",color:"red"},on:{click:t.closePrivatChat}}):t._e(),t.is_private_chat?t._e():a("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"приватный чат",color:"pink-6"},on:{click:function(e){t.privateStart2=!0}}}),a("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"Подарить токены",color:"pink-6"},on:{click:function(e){t.giftDialog=!0}}}),a("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"Оплатить вибро",color:"pink-6"},on:{click:function(){t.vibroDialog=!0}}})],1)],1),a("q-separator")],1)],1),t.datachat.length>0?a("q-scroll-area",{ref:"chatscroll",staticClass:"row q-pa-none vh-55",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},t._l(t.datachat,(function(e,s){return a("q-chat-message",{key:s,class:e.id!==t.pcm.user.id?"row q-ml-md":"row justify-end q-mr-md",attrs:{sent:e.id!==t.pcm.user.id,"label-sanitize":!0,"bg-color":e.ismodel?"pink-6":"amber-7",name:e.name,avatar:e.avatar,text:[e.text],stamp:0!==t.getdatediff(e.date).month?t.getdatediff(e.date).month+" months ago":0!==t.getdatediff(e.date).day?t.getdatediff(e.date).day+" days ago":0!==t.getdatediff(e.date).hr?t.getdatediff(e.date).hr+" hrs ago":t.getdatediff(e.date).min+" min ago"}})})),1):t._e(),a("div",{staticClass:"row fixed-bottom-right w-vw-chat"},[a("q-input",{staticClass:"col-10 backy-cmt2 q-my-xs q-ml-xs",attrs:{placeholder:"Ваше сообщение",borderless:"",color:t.pcm.controls.dark?"dark":"white","input-class":"text-body1 backy-cmt "+(t.pcm.controls.dark?"text-white":"text-dark")+"  q-my-md q-pl-md q-ml-none"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_comment()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-fab",{class:(t.pcm.controls.dark?"text-white":"text-dark")+" q-my-auto text-center q-pa-none",attrs:{"vertical-actions-align":"left",icon:"keyboard_arrow_up",direction:"up"},model:{value:t.fabLeft,callback:function(e){t.fabLeft=e},expression:"fabLeft"}},[a("q-fab-action",{attrs:{"label-position":"right",color:"pink-6",icon:"vpn_lock",label:"Приват"}}),a("q-fab-action",{attrs:{"label-position":"right",color:"pink-3",icon:"redeem",label:"Подарить токены"}})],1)]},proxy:!0}]),model:{value:t.chat_send,callback:function(e){t.chat_send=e},expression:"chat_send"}}),a("q-btn",{staticClass:"btnsend q-my-auto q-mx-auto text-center",attrs:{color:"green",align:"center",icon:"mdi-send",outline:"",round:"","text-color":"green"},on:{click:function(e){return t.send_comment()}}})],1)],1)]),a("q-dialog",{attrs:{maximized:"",persistent:""},model:{value:t.report,callback:function(e){t.report=e},expression:"report"}}),a("q-dialog",{model:{value:t.giftDialog,callback:function(e){t.giftDialog=e},expression:"giftDialog"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Вы можете подарить не более "+t._s(t.userToken)+" токенов\n        ")]),a("q-input",{staticClass:"col-12 q-px-xl q-mt-md q-mx-lg text-white",attrs:{rounded:"",outlined:"",dense:"",dark:"",placeholder:"Сумма токенов"},model:{value:t.amountGift,callback:function(e){t.amountGift=e},expression:"amountGift"}}),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(){return null}}},[t._v("Да")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.giftDialog=!1}}},[t._v("Нет")])],1)])],1),a("q-dialog",{model:{value:t.vibroDialog,callback:function(e){t.vibroDialog=e},expression:"vibroDialog"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          У вас имеется "+t._s(t.userToken)+" токенов\n        ")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(1)}}},[t._v("1 секунда")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(5)}}},[t._v("5 секунд")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(10)}}},[t._v("10 секунд")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(15)}}},[t._v("15 секунд")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.vibroDialog=!1}}},[t._v("отмена")])],1)])],1),t.userToken>10*t.sumPrivat?a("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 64, 90, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Внимание у вас "+t._s(t.userToken)+" токенов за приват модель просит\n          "+t._s(t.sumPrivat)+" в минуту. Вы хотите начать видеозвонок?\n        ")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.SuccPrivate()}}},[t._v("Да")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("Нет")])],1)])],1):t._e(),t.userToken>10*t.sumPrivat?a("q-dialog",{model:{value:t.privateStart2,callback:function(e){t.privateStart2=e},expression:"privateStart2"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Внимание у вас "+t._s(t.userToken)+" токенов за приват модель просит\n          "+t._s(t.sumPrivat)+" в минуту. Вы хотите начать приват?\n        ")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.SuccPrivate2()}}},[t._v("Да")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart2=!1}}},[t._v("Нет")])],1)])],1):t._e(),a("q-dialog",{model:{value:t.showTransaction,callback:function(e){t.showTransaction=e},expression:"showTransaction"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n         этот приватный чат обойдется вам в "+t._s(t.transaction.total)+" токенов\n        ")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.showTransaction=!1}}},[t._v("close")])],1)])],1),t.userToken<=t.sumPrivat?a("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          У вас недостаточно токенов для привата модель просит\n          "+t._s(t.sumPrivat)+" токенов за минуту (>10min)\n        ")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("ОК")])],1)])],1):t._e(),t.userToken<=t.sumPrivat?a("q-dialog",{model:{value:t.privateStart2,callback:function(e){t.privateStart2=e},expression:"privateStart2"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          У вас недостаточно токенов для привата модель просит\n          "+t._s(t.sumPrivat)+" токенов за минуту (>10min)\n        ")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("ОК")])],1)])],1):t._e()],1)},r=[],l=(s("498a"),s("ded3")),n=s.n(l),c=s("c427"),d=(s("18d6"),s("bd4c")),m=(s("ba56"),s("2f62")),u={name:"StreamWatch",computed:n()({player(){return this.$refs.Myplyr.player}},Object(m["b"])(["pcm"])),components:{},props:{options:{type:Object,default(){return{}}}},data(){return{privateStart:!1,hls:null,chat_send:null,madels:95,sub:"sub",is_private_chat:!1,report:!1,transaction:{total:0},showTransaction:!1,muted:!0,link:null,datachat:[],chatmess:null,datamodel:null,privat:!1,offline:!1,videoHD:!0,load:!0,privateStart2:!1,giftDialog:!1,vibroDialog:!1,amountGift:null,userToken:null,streamDesc:null,tags:null,target:null,sum:null,sumPrivat:null,cMode:!1,botDesk:null,showPlayer:!0,streamid:null,botTime:null,modelavatar:"https://cdn.quasar.dev/img/boy-avatar.png",useravatar:"https://cdn.quasar.dev/img/boy-avatar.png",chatplayer:null,vibroenable:!1,fabLeft:!1,thumbStyle:{display:"none"},barStyle:{display:"none"}}},sockets:{cl_control_streams:function(t){t.status?(this.showTransaction=!0,this.transaction.total=t.payload.total,this.send_message(`${this.pcm.user.un} is no longer in private`),this.is_private_chat=!1):this.$q.notify({type:"negative",messaging:"transaction error"})},streams_status:function(t){let e=this;Number(t.streamid)===Number(this.$route.params.modelid)&&Number(this.streamid)!==Number(t.streamid)&&(this.streamid=Number(t.streamid),this.$q.notify({type:"negative",classes:"Oswald-semibold",icon:"contactless",message:"модель не в эфире !",caption:"перенаправление на главную страницу.",progress:!0,color:"brown",textColor:"white",classes:"glossy",onDismiss:()=>{e.$router.push("/")}}))},applicationstatus:function(t){this.vibroenable=t.status},Vibration:function(t){"gift sended"==t.status?this.$q.notify({message:"Вы включили модели вибратор",color:"pink"}):this.$q.notify({message:"Что-то пошло не так",color:"red"})},cl_newMassage:function(t){let e={text:t.text,date:t.date,name:t.name,models:t.models,ismodel:t.ismodel,avatar:t.avatar,id:t.id};this.datachat.push(e),setTimeout((()=>{this.$refs.chatscroll.setScrollPosition(this.$refs.chatscroll.scrollSize)}),500)},cl_privateRoute(t){console.log("response from private stream:",t),"ready"==t.status?(this.$q.notify({color:"pink-6",message:"Модель согласилась на приват"}),this.$router.push({path:`/private/${t.payload.chatkey}/${t.payload.userid}/${t.payload.modelid}/called`}),setTimeout((()=>{location.reload()}),500)):this.$q.notify({color:"pink-6",message:"Модель отказала вам в привате"})},cl_privateRoute2(t){console.log("response from private stream:",t),"ready"==t.status?(this.$q.notify({color:"pink-6",message:"Модель accepted (you are the only one can see the stream)"}),this.is_private_chat=!0):this.$q.notify({color:"pink-6",message:"Модель отказала вам в привате"})},cl_getRouteMain:function(t){t.private="N"},cl_changestreamdata:function(t){console.log(t),this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime,this.modelavatar=t.model.avatar},cl_getstreaminfo:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getuseravatar:function(t){this.useravatar="ok"===t.status?t.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"}},created(){this.src=this._G.recUrl+"/liveHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`,this.$socket.emit("s_changePage",{page:"stream",model:this.$route.params.modelid,userid:this.pcm.user.id,token:this.pcm.user.tk});var t=this.$route.params.modelid;this.$socket.emit("s_getstreaminfo",{token:this.pcm.user.tk,modelid:t}),this.$socket.emit("s_getuseravatar",{userid:this.pcm.user.id}),this.link=this._G.recUrl+"/liveHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`,this.chatplayer=this.link,Object(c["a"])({method:"post",url:"/models_one",data:{modelid:this.$route.params.modelid}}).then((t=>{this.datamodel=t.data})),Object(c["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.userToken=t.data.balance}))},beforeDestroy(){this.closePrivatChat(),this.$socket.emit("s_changePage",{page:"exitstream",id:this.$route.params.modelid})},methods:{closePrivatChat(){this.pcm.auth&&(this.$socket.emit("control_streams",{token:this.pcm.user.tk,payload:{type:"close",modelid:this.$route.params.modelid,user_in_private:this.pcm.user.id}}),this.is_private_chat=!1)},switchSrc:function(){this.videoHD=!this.videoHD,this.src=this.videoHD?this._G.recUrl+"/liveHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`:this._G.recUrl+"/liveSD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`},getdatediff(t){let e=new Date(t),s=new Date,a=t=>d["b"].getDateDiff(s,e,t);return{month:a("months"),day:a("days"),hr:a("hours"),min:a("minutes")}},test_lush(t){this.$socket.emit("Vibration",{token:this.pcm.user.tk,modelid:this.$route.params.modelid,amount:t}),this.vibroDialog=!1},SuccPrivate2(){this.$socket.emit("s_StartPrivate2",{token:this.pcm.user.tk,userid:this.pcm.user.id,name:this.pcm.user.un,modelid:this.$route.params.modelid}),this.privateStart2=!1,this.$q.notify({color:"pink-6",message:"Ожидаем ответа от модели"})},SuccPrivate(){this.$socket.emit("s_StartPrivate",{token:this.pcm.user.tk,userid:this.pcm.user.id,name:this.pcm.user.un,modelid:this.$route.params.modelid}),this.privateStart=!1,this.$q.notify({color:"pink-6",message:"Ожидаем ответа от модели"})},giftTokenDialog(){this.amountGift<=0||null==this.amountGift?this.$q.notify({color:"negative",message:"Неверное количество токенов"}):Object(c["a"])({method:"get",url:"/donat",headers:{"x-access-token":this.pcm.user.tk,model:this.$route.params.modelid,amount:this.amountGift}}).then((t=>{"ok"==t.data.status?(this.$q.notify({color:"green",message:"Подарок отправлен"}),this.giftDialog=!1):this.$q.notify({color:"negative",message:"Что-то пошло не так!"})}))},send_comment(){null!=this.chat_send&&""!=this.chat_send&&" "!=this.chat_send&&this.chat_send.trim()?(console.log(this.chat_send),this.$socket.emit("s_streamchatsend",{username:this.pcm.user.un,modelid:this.$route.params.modelid,textmess:this.chat_send,avatar:this.useravatar,id:this.pcm.user.id},(t=>console.log("message sended:",t))),this.chat_send=null):this.$q.notify({color:"pink-6",message:"Сообщение пустое"})},send_message(t){this.$socket.emit("s_streamchatsend",{username:this.pcm.user.un,modelid:this.$route.params.modelid,textmess:t,avatar:this.useravatar,id:this.pcm.user.id},(t=>console.log("message sended:",t)))}}},h=u,p=(s("35b0d"),s("2877")),v=s("9989"),b=s("9c40"),g=s("0016"),f=s("f09f"),x=s("a370"),q=s("cb32"),k=s("58a8"),y=s("068f"),_=s("eb85"),w=s("4983"),C=s("8169"),S=s("27f9"),$=s("c294"),D=s("72db"),P=s("24e8"),T=s("eebe"),Q=s.n(T),j=Object(p["a"])(h,o,r,!1,null,"d3545a02",null),z=j.exports;Q()(j,"components",{QPage:v["a"],QBtn:b["a"],QIcon:g["a"],QCard:f["a"],QCardSection:x["a"],QAvatar:q["a"],QBadge:k["a"],QImg:y["a"],QSeparator:_["a"],QScrollArea:w["a"],QChatMessage:C["a"],QInput:S["a"],QFab:$["a"],QFabAction:D["a"],QDialog:P["a"]});var G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"bg-white fullpage",staticStyle:{overflow:"auto"}},[s("div",{staticClass:"fit fixed bg-black"},[s("q-hls",{ref:"playerhls",staticClass:"h-vh-100 ",attrs:{src:t.src,wps:100,hps:100,c:!1,classes:"video-fit"}})],1),s("div",{staticClass:"row w-vw-100 h-vh-100 fixed-center"},[s("div",{staticClass:"row w-vw-100"},[s("div",{staticClass:"row w-hw-100 "},[s("div",{staticClass:"row justify-between mt-vh-3 "},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"w-100 text-white fixed-top-left",attrs:{clickable:""}},[s("q-item-section",{attrs:{side:""}},[s("q-avatar",{attrs:{round:"",size:"48px"}},[s("img",{attrs:{src:t.modelavatar}}),s("q-badge",{attrs:{floating:"",color:"red",label:"live"}})],1)],1),s("q-item-section",[t.datamodel?s("q-item-label",[t._v(" "+t._s(t.datamodel.modelname))]):t._e(),s("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[t._v(t._s(t.streamDesc)+" | "+t._s(t.tags))])],1),t.datamodel?s("q-item-section",{staticClass:"text-white",attrs:{side:""}},[s("q-chip",{on:{click:function(e){return t.gotoprofile(t.datamodel)}}},[s("q-avatar",[t._v("@")]),t._v("\n                "+t._s(t.datamodel.UuserId.username)+"\n              ")],1)],1):t._e()],1)],1)]),s("div",{staticClass:"row h-vh-70 w-vw-100 fixed-center"},[s("q-scroll-area",{directives:[{name:"touch",rawName:"v-touch:swipe.right",value:t.onright,expression:"onright",arg:"swipe",modifiers:{right:!0}}],ref:"chatscroll",staticClass:"col row ml-vw-1 q-pa-none ",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},t._l(t.datachat,(function(e){return s("div",{key:e.date,staticClass:"text-white",staticStyle:{width:"95%"}},[e.ismodel?s("div",{staticClass:"q-ma-none row flexchat"},[s("q-chip",{attrs:{dense:""}},[s("q-avatar",{attrs:{color:"red","text-color":"white"}},[s("img",{attrs:{src:e.avatar}})]),t._v("\n                "+t._s(e.name)+":\n              ")],1),s("p",{staticClass:"text-xl text-pink-6 q-ma-none q-ml-xs"},[t._v(t._s(e.text))])],1):s("div",{staticClass:"q-ma-none row flexchat"},[s("q-chip",{attrs:{dense:""}},[s("q-avatar",{attrs:{color:"red","text-color":"white"}},[s("img",{attrs:{src:e.avatar}})]),t._v("\n                "+t._s(e.name)+":\n              ")],1),s("p",{staticClass:"text-white text-xl q-ma-none q-ml-xs"},[t._v(t._s(e.text))])],1)])})),0)],1),s("div",{staticClass:"fixed-bottom  w-vw-100 row"},[s("q-input",{staticClass:"sendfix col-10 q-my-xs q-ml-xs",attrs:{placeholder:"Ваше сообщение",borderless:"","input-class":"text-body1 backy text-white q-my-md q-pl-md"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_comment()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-fab",{staticClass:" text-black q-my-auto text-center ",attrs:{"vertical-actions-align":"left",color:"black",icon:"keyboard_arrow_up",direction:"up"},model:{value:t.fabLeft,callback:function(e){t.fabLeft=e},expression:"fabLeft"}},[s("q-fab-action",{attrs:{"label-position":"right",color:"pink-6",icon:"vpn_lock",label:"Приват"},on:{click:function(e){t.privateStart=!0}}}),s("q-fab-action",{attrs:{"label-position":"right",color:"pink-3",icon:"redeem",label:"Подарить токены"},on:{click:function(e){t.giftDialog=!0}}}),s("q-fab-action",{attrs:{"label-position":"right",color:t.videoHD?"pink-3":"dark",label:t.videoHD?"стандартный":"низкое качество",icon:"hd"},on:{click:t.switchSrc}})],1)]},proxy:!0}]),model:{value:t.chat_send,callback:function(e){t.chat_send=e},expression:"chat_send"}}),s("q-btn",{staticClass:"btnsend q-my-auto q-mx-auto text-center",attrs:{color:"green",align:"center",icon:"mdi-send",outline:"",round:"","text-color":"green"},on:{click:function(e){return t.send_comment()}}})],1)])]),s("q-dialog",{model:{value:t.giftDialog,callback:function(e){t.giftDialog=e},expression:"giftDialog"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Вы можете подарить не более "+t._s(t.userToken)+" токенов\n        ")]),s("q-input",{staticClass:"col-12 q-px-xl q-mt-md q-mx-lg text-white",attrs:{rounded:"",outlined:"",dense:"",dark:"",placeholder:"Сумма токенов"},model:{value:t.amountGift,callback:function(e){t.amountGift=e},expression:"amountGift"}}),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.giftTokenDialog()}}},[t._v("Да")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.giftDialog=!1}}},[t._v("Нет")])],1)])],1),t.userToken>t.sumPrivat?s("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"4vw"}},[t._v("\n          Внимание у вас "+t._s(t.userToken)+" токенов за приват модель просит\n          "+t._s(t.sumPrivat)+" в минуту. Вы хотите начать приват?\n        ")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.SuccPrivate()}}},[t._v("Да")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("Нет")])],1)])],1):s("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"4vw"}},[t._v("\n          У вас недостаточно токенов для привата модель просит\n          "+t._s(t.sumPrivat)+" токенов за минуту\n        ")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("ОК")])],1)])],1)],1)},H=[],M=(s("f0e2"),{components:{},data(){return{privateStart:!1,hls:null,chat_send:null,madels:95,sub:"sub",report:!1,fabLeft:!1,muted:!0,link:null,chatmess:null,datamodel:null,privat:!1,offline:!1,load:!0,giftDialog:!1,amountGift:null,userToken:null,streamDesc:null,tags:null,target:null,sum:null,sumPrivat:null,cMode:!1,botDesk:null,botTime:null,modelavatar:"https://cdn.quasar.dev/img/boy-avatar.png",chatplayer:null,amount_bounty:null,bal:0,bounty:!1,chat_send:null,madels:95,sub:"sub",checklive:!1,videoHD:!0,muted:!0,link:null,datachat:[],chatmess:null,interval:null,videol:null,peoplesIn:0,thumbStyle:{display:"none"},barStyle:{display:"none"},src:this._G.recUrl+"/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"}},computed:n()(n()({},Object(m["b"])(["pcm"])),{},{playerhls:function(){return this.$refs.playerhls}}),created:function(){this.src=this._G.recUrl+"/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`,this.$nextTick((function(){this.videol=this.$route.params.modelid,this.$socket.emit("s_changePage",{page:"stream",model:this.$route.params.modelid,userid:this.pcm.user.un,token:this.pcm.user.tk}),this.$socket.emit("s_getstreaminfo",{token:this.pcm.user.tk,modelid:this.$route.params.modelid}),this.$socket.emit("s_getuseravatar",{userid:this.$route.params.modelid}),this.chatplayer=this.link,Object(c["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.bal=t.data.balance,this.userToken=t.data.balance})),this.src=this._G.recUrl+"/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`}))},sockets:{cl_newMassage:function(t){let e={text:t.text,date:t.date,name:t.name,models:t.models,ismodel:t.ismodel,avatar:t.avatar};this.datachat.push(e),setTimeout((()=>{this.$refs.chatscroll.setScrollPosition(this.$refs.chatscroll.scrollSize)}),500)},cl_privateRoute(t){"ready"==t.status?(this.$q.notify({color:"pink-6",message:"Модель согласилась на приват"}),this.$router.push({path:`/private/${t.payload.chatkey}/${t.payload.userid}/${t.payload.modelid}/called`}),setTimeout((()=>{location.reload()}),500)):this.$q.notify({color:"pink-6",message:"Модель отказала вам в привате"})},cl_getRouteMain:function(t){t.private="N"},cl_changestreamdata:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getstreaminfo:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getuseravatar:function(t){this.modelavatar="ok"==t.status?t.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},cl_preopleinlive:function(t){this.peoplesIn=t.number>0?t.number-1:t.number}},beforeMount:function(){this.pcm.auth||(this.$q.notify({type:"warning",message:"signin first please!"}),setTimeout((()=>{this.$root.$emit("changepage",1)}),1e3))},beforeDestroy(){this.link=null,window.clearInterval(this.interval)},mounted:function(){this.playerhls.addEventListener("click",(()=>{this.switchSrc()}))},methods:{onright:function(){this.$router.back()},SuccPrivate(){this.$socket.emit("s_StartPrivate",{token:this.pcm.user.tk,userid:this.pcm.user.un,name:this.pcm.user.un,modelid:this.$route.params.modelid}),this.privateStart=!1,this.$q.notify({color:"pink-6",message:"Ожидаем ответа от модели"})},send_comment(){null!=this.chat_send&&""!=this.chat_send&&" "!=this.chat_send&&this.chat_send.trim()?(this.$socket.emit("s_streamchatsend",{username:this.pcm.user.un,modelid:this.$route.params.modelid,textmess:this.chat_send,avatar:this.pcm.user.avatar?this.pcm.user.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},(t=>console.log("message sended:",t))),this.chat_send=null):this.$q.notify({color:"pink-6",message:"Сообщение пустое"})},switchSrc:function(){this.videoHD=!this.videoHD,this.src=this.videoHD?this._G.recUrl+"/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`:this._G.recUrl+"/mobileSD/model"+this.$route.params.modelid+"/index.m3u8"+`?id=${this.pcm.user.id}&token=abcsf123nk21d`},play(){this.$refs.videoRef.play()},list_comments(){Object(c["a"])({method:"get",url:"/search_comments",headers:{modelid:this.$route.params.modelid}}).then((t=>{this.datachat=null,this.datachat=t.data.data}))},gotoprofile(t){console.log(t)},donat(){Object(c["a"])({method:"get",url:"/donat",headers:{"x-access-token":this.pcm.user.tk,model:this.$route.params.modelid,amount:this.amount_bounty}}).then((t=>{"ok"==t.data.status?(this.$q.notify("Подарок отправлен"),this.bounty=!1):this.$q.notify(t.data.status)}))},reward(){this.bounty=!0},giftTokenDialog(){console.log("ok")},unmuted(){this.muted=!1;var t=document.getElementById("videoElement");t.muted=!t.muted},muteddd(){this.muted=!0;var t=document.getElementById("videoElement");t.muted=!t.muted}}}),O=M,I=(s("2e7c"),s("66e5")),U=s("4074"),E=s("0170"),L=s("b047"),N=s("714f"),A=Object(p["a"])(O,G,H,!1,null,"3d4e51e1",null),R=A.exports;Q()(A,"components",{QPage:v["a"],QItem:I["a"],QItemSection:U["a"],QAvatar:q["a"],QBadge:k["a"],QItemLabel:E["a"],QChip:L["a"],QScrollArea:w["a"],QInput:S["a"],QFab:$["a"],QFabAction:D["a"],QBtn:b["a"],QDialog:P["a"],QCard:f["a"]}),Q()(A,"directives",{Ripple:N["a"]});var B={name:"App",components:{desktop:z,mobile:R},data(){return{}},methods:{}},F=B,J=Object(p["a"])(F,a,i,!1,null,null,null);e["default"]=J.exports;Q()(J,"components",{QPage:v["a"]})},7416:function(t,e,s){},ad34:function(t,e,s){}}]);
//# sourceMappingURL=8.js.map