(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"3b63":function(t,e,a){"use strict";a("5f4a")},"5f4a":function(t,e,a){},"67f5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-black"},[t.$q.platform.is.desktop?a("div",{staticClass:"desktop-only"},[a("desktop")],1):t._e(),t.$q.platform.is.mobile?a("div",{staticClass:"mobile-only"},[a("mobile")],1):t._e()])},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{class:t.pcm.controls.dark?"bg-dark":"bg-white"},[s("div",{staticClass:"row",staticStyle:{"min-height":"inherit"}},[s("div",{staticClass:"col-8"},[s("div",{staticClass:"full-width row justify-end"}),t._e(),s("div",{staticClass:"fullpage"},[s("q-hls",{attrs:{src:t.src,wps:79,hps:95,c:!0}}),s("q-icon",{staticClass:"absolute-bottom-left cursor-pointer z-10",attrs:{name:"hd",size:"34px",color:t.videoHD?"white":"grey"},on:{click:t.switchSrc}})],1),t.privat?s("div",{staticClass:"text-white flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row",staticStyle:{height:"50vh","max-width":"25vw"}},[s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg"},[t._v("Модель в привате")])])]):t._e()]),s("div",{staticClass:"col-4"},[s("div",[s("q-card",{class:"text-black no-shadow "+(t.pcm.controls.dark?"bg-dark":"bg-white")+" "},[s("q-card-section",{class:"q-ma-none q-pa-none "+(t.pcm.controls.dark?"text-white":"text-dark")},[s("q-card-section",{staticClass:"q-ma-none q-pa-none"},[s("div",{staticClass:"row justify-between items-center mt-vh-3"},[s("div",{staticClass:"row ml-vw-05"},[s("q-avatar",{attrs:{size:"5.16vh"}},[s("img",{staticClass:"bordavatar",attrs:{src:t.modelavatar}})]),t.datamodel?s("div",{staticClass:"row ml-vw-05"},[s("p",{staticClass:"col-12 q-mb-none text-subtitle1 mt-vh-05 text-nowrap"},[t._v("\n                      "+t._s(t.datamodel.modelname)+"\n                      "),s("q-badge",{staticClass:"q-ml-sm q-mb-none",attrs:{color:"pink-6",align:"middle"}},[s("span",{staticClass:"dot q-mr-xs bg-white"}),t._v(" live\n                      ")])],1),s("p",{staticClass:"text-grey-8 col-12 cuttext text-nowrap text-comment-14 q-mb-none h-vh-3"},[t._v("\n                      @"+t._s(t.datamodel.UuserId.username)+"\n                    ")])]):t._e(),"enabled"==t.vibroenable?s("q-icon",[s("q-img",{attrs:{src:a("cb1d")}})],1):t._e()],1)]),s("div",{staticClass:"col text-max2-16 ml-vw-05 q-pl-xs"},[s("p",{staticClass:"text-body1 q-my-none text-weight-light"},[t._v(t._s(t.streamDesc))]),s("p",{staticClass:"text-body1 q-my-none text-weight-light"},[t._v("\n                  "+t._s(t.tags)+"\n                ")])])]),s("div",{staticClass:"row q-mt-xs"},[s("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"Приват",color:"pink-6"},on:{click:function(e){t.privateStart=!0}}}),s("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"Подарить токены",color:"pink-6"},on:{click:function(e){t.giftDialog=!0}}}),s("q-btn",{staticClass:"col self-center q-px-none q-py-xs q-ml-xs q-mb-xs q-mt-xs",attrs:{rounded:"",size:"9px",label:"Оплатить вибро",color:"pink-6"},on:{click:function(){t.vibroDialog=!0}}})],1)],1),s("q-separator")],1)],1),t.datachat.length>0?s("q-scroll-area",{ref:"chatscroll",staticClass:"row q-pa-none vh-55",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},t._l(t.datachat,(function(e,a){return s("q-chat-message",{key:a,class:e.id!==t.pcm.user.id?"row q-ml-md":"row justify-end q-mr-md",attrs:{sent:e.id!==t.pcm.user.id,"label-sanitize":!0,"bg-color":e.ismodel?"pink-6":"amber-7",name:e.name,avatar:e.avatar,text:[e.text],stamp:0!==t.getdatediff(e.date).month?t.getdatediff(e.date).month+" months ago":0!==t.getdatediff(e.date).day?t.getdatediff(e.date).day+" days ago":0!==t.getdatediff(e.date).hr?t.getdatediff(e.date).hr+" hrs ago":t.getdatediff(e.date).min+" min ago"}})})),1):t._e(),s("div",{staticClass:"row absolute-bottom-right w-vw-chat"},[s("q-input",{staticClass:"col-10 backy-cmt2 q-my-xs q-ml-xs",attrs:{placeholder:"Ваше сообщение",borderless:"",color:t.pcm.controls.dark?"dark":"white","input-class":"text-body1 backy-cmt "+(t.pcm.controls.dark?"text-white":"text-dark")+"  q-my-md q-pl-md q-ml-none"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_comment()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-fab",{class:(t.pcm.controls.dark?"text-white":"text-dark")+" q-my-auto text-center q-pa-none",attrs:{"vertical-actions-align":"left",icon:"keyboard_arrow_up",direction:"up"},model:{value:t.fabLeft,callback:function(e){t.fabLeft=e},expression:"fabLeft"}},[s("q-fab-action",{attrs:{"label-position":"right",color:"pink-6",icon:"vpn_lock",label:"Приват"}}),s("q-fab-action",{attrs:{"label-position":"right",color:"pink-3",icon:"redeem",label:"Подарить токены"}})],1)]},proxy:!0}]),model:{value:t.chat_send,callback:function(e){t.chat_send=e},expression:"chat_send"}}),s("q-btn",{staticClass:"btnsend q-my-auto q-mx-auto text-center",attrs:{color:"green",align:"center",icon:"mdi-send",outline:"",round:"","text-color":"green"},on:{click:function(e){return t.send_comment()}}})],1)],1)]),s("q-dialog",{attrs:{maximized:"",persistent:""},model:{value:t.report,callback:function(e){t.report=e},expression:"report"}}),s("q-dialog",{model:{value:t.giftDialog,callback:function(e){t.giftDialog=e},expression:"giftDialog"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Вы можете подарить не более "+t._s(t.userToken)+" токенов\n        ")]),s("q-input",{staticClass:"col-12 q-px-xl q-mt-md q-mx-lg text-white",attrs:{rounded:"",outlined:"",dense:"",dark:"",placeholder:"Сумма токенов"},model:{value:t.amountGift,callback:function(e){t.amountGift=e},expression:"amountGift"}}),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(){return null}}},[t._v("Да")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.giftDialog=!1}}},[t._v("Нет")])],1)])],1),s("q-dialog",{model:{value:t.vibroDialog,callback:function(e){t.vibroDialog=e},expression:"vibroDialog"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          У вас имеется "+t._s(t.userToken)+" токенов\n        ")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(1)}}},[t._v("1 секунда")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(5)}}},[t._v("5 секунд")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(10)}}},[t._v("10 секунд")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.test_lush(15)}}},[t._v("15 секунд")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.vibroDialog=!1}}},[t._v("отмена")])],1)])],1),t.userToken>t.sumPrivat?s("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Внимание у вас "+t._s(t.userToken)+" токенов за приват модель просит\n          "+t._s(t.sumPrivat)+" в минуту. Вы хотите начать приват?\n        ")]),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.SuccPrivate()}}},[t._v("Да")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("Нет")])],1)])],1):s("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          У вас недостаточно токенов для привата модель просит\n          "+t._s(t.sumPrivat)+" токенов за минуту\n        ")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("ОК")])],1)])],1)],1)},l=[],r=(a("498a"),a("ded3")),n=a.n(r),c=a("c427"),d=a("18d6"),m=a("bd4c"),u=(a("ba56"),a("2f62")),h={name:"StreamWatch",computed:n()({player(){return this.$refs.Myplyr.player}},Object(u["b"])(["pcm"])),components:{},props:{options:{type:Object,default(){return{}}}},data(){return{privateStart:!1,hls:null,chat_send:null,madels:95,sub:"sub",report:!1,muted:!0,link:null,datachat:[],chatmess:null,datamodel:null,privat:!1,offline:!1,videoHD:!0,load:!0,giftDialog:!1,vibroDialog:!1,amountGift:null,userToken:null,streamDesc:null,tags:null,target:null,sum:null,sumPrivat:null,cMode:!1,botDesk:null,showPlayer:!0,botTime:null,modelavatar:"https://cdn.quasar.dev/img/boy-avatar.png",useravatar:"https://cdn.quasar.dev/img/boy-avatar.png",chatplayer:null,vibroenable:!1,fabLeft:!1,thumbStyle:{display:"none"},barStyle:{display:"none"}}},sockets:{applicationstatus:function(t){this.vibroenable=t.status},Vibration:function(t){"gift sended"==t.status?this.$q.notify({message:"Вы включили модели вибратор",color:"pink"}):this.$q.notify({message:"Что-то пошло не так",color:"red"})},cl_newMassage:function(t){let e={text:t.text,date:t.date,name:t.name,models:t.models,ismodel:t.ismodel,avatar:t.avatar,id:t.id};this.datachat.push(e),setTimeout((()=>{this.$refs.chatscroll.setScrollPosition(this.$refs.chatscroll.scrollSize)}),500)},cl_privateRoute(t){"ready"==t.status?(this.$q.notify({color:"pink-6",message:"Модель согласилась на приват"}),this.$router.push({path:"private/"+this.$route.params.modelid})):this.$q.notify({color:"pink-6",message:"Модель отказала вам в привате"})},cl_getRouteMain:function(t){t.private="N"},cl_changestreamdata:function(t){console.log(t),this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime,this.modelavatar=t.model.avatar},cl_getstreaminfo:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getuseravatar:function(t){this.useravatar="ok"===t.status?t.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"}},created(){this.src=this._G.recUrl+"/stream/liveHD/model"+this.$route.params.modelid+"/index.m3u8",this.$socket.emit("s_changePage",{page:"stream",model:this.$route.params.modelid,userid:this.pcm.user.id,token:this.pcm.user.tk});var t=this.$route.params.modelid;this.$socket.emit("s_getstreaminfo",{token:this.pcm.user.tk,modelid:t}),this.$socket.emit("s_getuseravatar",{userid:this.pcm.user.id}),this.link=this._G.recUrl+"/stream/liveHD/model"+this.$route.params.modelid+"/index.m3u8",this.chatplayer=this.link,Object(c["a"])({method:"post",url:"/models_one",data:{modelid:this.$route.params.modelid}}).then((t=>{this.datamodel=t.data})),Object(c["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.userToken=t.data.balance}))},beforeDestroy(){this.$socket.emit("s_changePage",{page:"exitstream",id:this.$route.params.modelid})},methods:{switchSrc:function(){this.videoHD=!this.videoHD,this.src=this.videoHD?this._G.recUrl+"/stream/liveHD/model"+this.$route.params.modelid+"/index.m3u8":this._G.recUrl+"/stream/liveSD/model"+this.$route.params.modelid+"/index.m3u8"},getdatediff(t){let e=new Date(t),a=new Date,s=t=>m["b"].getDateDiff(a,e,t);return{month:s("months"),day:s("days"),hr:s("hours"),min:s("minutes")}},test_lush(t){this.$socket.emit("Vibration",{token:this.pcm.user.tk,modelid:this.$route.params.modelid,amount:t}),this.vibroDialog=!1},SuccPrivate(){this.$socket.emit("s_StartPrivate",{token:this.pcm.user.tk,userid:this.pcm.user.id,name:this.pcm.user.un,modelid:this.$route.params.modelid}),this.privateStart=!1,this.$q.notify({color:"pink-6",message:"Ожидаем ответа от модели"})},giftTokenDialog(){this.amountGift<=0||null==this.amountGift?this.$q.notify({color:"negative",message:"Неверное количество токенов"}):Object(c["a"])({method:"get",url:"/donat",headers:{"x-access-token":this.pcm.user.tk,model:this.$route.params.modelid,amount:this.amountGift}}).then((t=>{"ok"==t.data.status?(this.$q.notify({color:"green",message:"Подарок отправлен"}),this.giftDialog=!1):this.$q.notify({color:"negative",message:"Что-то пошло не так!"})}))},send_comment(){null!=this.chat_send&&""!=this.chat_send&&" "!=this.chat_send&&this.chat_send.trim()?(this.$socket.emit("s_streamchatsend",{username:this.pcm.user.un,modelid:this.$route.params.modelid,textmess:this.chat_send,avatar:this.useravatar,id:this.pcm.user.id},(t=>console.log("message sended:",t))),this.chat_send=null):this.$q.notify({color:"pink-6",message:"Сообщение пустое"})}}},p=h,b=(a("f0da"),a("2877")),v=a("9989"),g=a("9c40"),f=a("0016"),x=a("f09f"),q=a("a370"),k=a("cb32"),y=a("58a8"),_=a("068f"),w=a("eb85"),C=a("4983"),S=a("8169"),D=a("27f9"),$=a("c294"),P=a("72db"),Q=a("24e8"),T=a("eebe"),j=a.n(T),G=Object(b["a"])(p,o,l,!1,null,"89e17896",null),z=G.exports;j()(G,"components",{QPage:v["a"],QBtn:g["a"],QIcon:f["a"],QCard:x["a"],QCardSection:q["a"],QAvatar:k["a"],QBadge:y["a"],QImg:_["a"],QSeparator:w["a"],QScrollArea:C["a"],QChatMessage:S["a"],QInput:D["a"],QFab:$["a"],QFabAction:P["a"],QDialog:Q["a"]});var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-white fullpage",staticStyle:{overflow:"auto"}},[a("div",{staticClass:"fit fixed bg-black"},[a("q-hls",{staticClass:"h-vh-100 ",attrs:{src:t.src,wps:100,hps:100,c:!1,classes:"video-fit"}})],1),a("div",{staticClass:"row w-vw-100 h-vh-100 fixed-center"},[a("div",{staticClass:"row w-vw-100"},[a("div",{staticClass:"row w-hw-100 "},[a("div",{staticClass:"row justify-between mt-vh-3 "},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"w-100 text-white fixed-top-left",attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{attrs:{round:"",size:"48px"}},[a("img",{attrs:{src:t.modelavatar}}),a("q-badge",{attrs:{floating:"",color:"red",label:"live"}})],1)],1),a("q-item-section",[t.datamodel?a("q-item-label",[t._v(" "+t._s(t.datamodel.modelname))]):t._e(),a("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[t._v(t._s(t.streamDesc)+" | "+t._s(t.tags))])],1),t.datamodel?a("q-item-section",{staticClass:"text-white",attrs:{side:""}},[a("q-chip",{on:{click:function(e){return t.gotoprofile(t.datamodel)}}},[a("q-avatar",[t._v("@")]),t._v("\n                "+t._s(t.datamodel.UuserId.username)+"\n              ")],1)],1):t._e()],1)],1)]),a("div",{staticClass:"row h-vh-70 w-vw-100 fixed-center"},[a("q-scroll-area",{directives:[{name:"touch",rawName:"v-touch:swipe.right",value:t.onright,expression:"onright",arg:"swipe",modifiers:{right:!0}}],ref:"chatscroll",staticClass:"col row ml-vw-1 q-pa-none ",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},t._l(t.datachat,(function(e){return a("div",{key:e.date,staticClass:"text-white",staticStyle:{width:"95%"}},[e.ismodel?a("div",{staticClass:"q-ma-none row flexchat"},[a("q-chip",{attrs:{dense:""}},[a("q-avatar",{attrs:{color:"red","text-color":"white"}},[a("img",{attrs:{src:e.avatar}})]),t._v("\n                "+t._s(e.name)+":\n              ")],1),a("p",{staticClass:"text-xl text-pink-6 q-ma-none q-ml-xs"},[t._v(t._s(e.text))])],1):a("div",{staticClass:"q-ma-none row flexchat"},[a("q-chip",{attrs:{dense:""}},[a("q-avatar",{attrs:{color:"red","text-color":"white"}},[a("img",{attrs:{src:e.avatar}})]),t._v("\n                "+t._s(e.name)+":\n              ")],1),a("p",{staticClass:"text-white text-xl q-ma-none q-ml-xs"},[t._v(t._s(e.text))])],1)])})),0)],1),a("div",{staticClass:"fixed-bottom  w-vw-100 row"},[a("q-input",{staticClass:"sendfix col-10 q-my-xs q-ml-xs",attrs:{placeholder:"Ваше сообщение",borderless:"","input-class":"text-body1 backy text-white q-my-md q-pl-md"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_comment()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-fab",{staticClass:" text-black q-my-auto text-center ",attrs:{"vertical-actions-align":"left",color:"black",icon:"keyboard_arrow_up",direction:"up"},model:{value:t.fabLeft,callback:function(e){t.fabLeft=e},expression:"fabLeft"}},[a("q-fab-action",{attrs:{"label-position":"right",color:"pink-6",icon:"vpn_lock",label:"Приват"},on:{click:function(e){t.privateStart=!0}}}),a("q-fab-action",{attrs:{"label-position":"right",color:"pink-3",icon:"redeem",label:"Подарить токены"},on:{click:function(e){t.giftDialog=!0}}}),a("q-fab-action",{attrs:{"label-position":"right",color:t.videoHD?"pink-3":"dark",label:t.videoHD?"стандартный":"низкое качество",icon:"hd"},on:{click:t.switchSrc}})],1)]},proxy:!0}]),model:{value:t.chat_send,callback:function(e){t.chat_send=e},expression:"chat_send"}}),a("q-btn",{staticClass:"btnsend q-my-auto q-mx-auto text-center",attrs:{color:"green",align:"center",icon:"mdi-send",outline:"",round:"","text-color":"green"},on:{click:function(e){return t.send_comment()}}})],1)])]),a("q-dialog",{model:{value:t.giftDialog,callback:function(e){t.giftDialog=e},expression:"giftDialog"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("\n          Вы можете подарить не более "+t._s(t.userToken)+" токенов\n        ")]),a("q-input",{staticClass:"col-12 q-px-xl q-mt-md q-mx-lg text-white",attrs:{rounded:"",outlined:"",dense:"",dark:"",placeholder:"Сумма токенов"},model:{value:t.amountGift,callback:function(e){t.amountGift=e},expression:"amountGift"}}),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.giftTokenDialog()}}},[t._v("Да")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.giftDialog=!1}}},[t._v("Нет")])],1)])],1),t.userToken>t.sumPrivat?a("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"4vw"}},[t._v("\n          Внимание у вас "+t._s(t.userToken)+" токенов за приват модель просит\n          "+t._s(t.sumPrivat)+" в минуту. Вы хотите начать приват?\n        ")]),a("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.SuccPrivate()}}},[t._v("Да")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("Нет")])],1)])],1):a("q-dialog",{model:{value:t.privateStart,callback:function(e){t.privateStart=e},expression:"privateStart"}},[a("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[a("div",{staticClass:"justify-center row"},[a("q-avatar",{staticClass:"col-12",attrs:{icon:"videocam"}}),a("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"4vw"}},[t._v("\n          У вас недостаточно токенов для привата модель просит\n          "+t._s(t.sumPrivat)+" токенов за минуту\n        ")]),a("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.privateStart=!1}}},[t._v("ОК")])],1)])],1)],1)},M=[],I=(a("f0e2"),{components:{},data(){return{privateStart:!1,hls:null,chat_send:null,madels:95,sub:"sub",report:!1,fabLeft:!1,muted:!0,link:null,chatmess:null,datamodel:null,privat:!1,offline:!1,load:!0,giftDialog:!1,amountGift:null,userToken:null,streamDesc:null,tags:null,target:null,sum:null,sumPrivat:null,cMode:!1,botDesk:null,botTime:null,modelavatar:"https://cdn.quasar.dev/img/boy-avatar.png",chatplayer:null,amount_bounty:null,bal:0,bounty:!1,chat_send:null,madels:95,sub:"sub",checklive:!1,videoHD:!0,muted:!0,link:null,datachat:[],chatmess:null,interval:null,videol:null,peoplesIn:0,thumbStyle:{display:"none"},barStyle:{display:"none"},src:this._G.recUrl+"/stream/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"}},computed:n()({},Object(u["b"])(["pcm"])),created:function(){this.$nextTick((function(){this.videol=this.$route.params.modelid,this.$socket.emit("s_changePage",{page:"stream",model:this.$route.params.modelid,userid:this.pcm.user.un,token:this.pcm.user.tk}),this.$socket.emit("s_getstreaminfo",{token:this.pcm.user.tk,modelid:this.$route.params.modelid}),this.$socket.emit("s_getuseravatar",{userid:this.$route.params.modelid}),this.chatplayer=this.link,Object(c["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.bal=t.data.balance,this.userToken=t.data.balance})),this.src=this._G.recUrl+"/stream/mobileHD/model"+this.$route.params.modelid+"/index.m3u8"}))},sockets:{cl_newMassage:function(t){let e={text:t.text,date:t.date,name:t.name,models:t.models,ismodel:t.ismodel,avatar:t.avatar};this.datachat.push(e),setTimeout((()=>{this.$refs.chatscroll.setScrollPosition(this.$refs.chatscroll.scrollSize)}),500)},cl_privateRoute(t){"ready"==t.status?(this.$q.notify({color:"pink-6",message:"Модель согласилась на приват"}),this.$router.push({path:"private/"+this.$route.params.modelid})):this.$q.notify({color:"pink-6",message:"Модель отказала вам в привате"})},cl_getRouteMain:function(t){t.private="N"},cl_changestreamdata:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getstreaminfo:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getuseravatar:function(t){this.modelavatar="ok"==t.status?t.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},cl_preopleinlive:function(t){this.peoplesIn=t.number>0?t.number-1:t.number}},beforeDestroy(){this.link=null,window.clearInterval(this.interval)},methods:{onright:function(){this.$router.back()},SuccPrivate(){this.$socket.emit("s_StartPrivate",{token:this.pcm.user.tk,userid:this.pcm.user.un,name:this.pcm.user.un,modelid:this.$route.params.modelid}),this.privateStart=!1,this.$q.notify({color:"pink-6",message:"Ожидаем ответа от модели"})},send_comment(){null!=this.chat_send&&""!=this.chat_send&&" "!=this.chat_send&&this.chat_send.trim()?(this.$socket.emit("s_streamchatsend",{username:d["a"].getItem("username"),modelid:this.$route.params.modelid,textmess:this.chat_send,avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},(t=>console.log("message sended:",t))),this.chat_send=null):this.$q.notify({color:"pink-6",message:"Сообщение пустое"})},switchSrc:function(){this.videoHD=!this.videoHD,this.src=this.videoHD?this._G.recUrl+"/stream/mobileHD/model"+this.$route.params.modelid+"/index.m3u8":this._G.recUrl+"/stream/mobileSD/model"+this.$route.params.modelid+"/index.m3u8"},play(){this.$refs.videoRef.play()},list_comments(){Object(c["a"])({method:"get",url:"/search_comments",headers:{modelid:this.$route.params.modelid}}).then((t=>{this.datachat=null,this.datachat=t.data.data}))},gotoprofile(t){console.log(t)},donat(){Object(c["a"])({method:"get",url:"/donat",headers:{"x-access-token":this.pcm.user.tk,model:this.$route.params.modelid,amount:this.amount_bounty}}).then((t=>{"ok"==t.data.status?(this.$q.notify("Подарок отправлен"),this.bounty=!1):this.$q.notify(t.data.status)}))},reward(){this.bounty=!0},giftTokenDialog(){console.log("ok")},unmuted(){this.muted=!1;var t=document.getElementById("videoElement");t.muted=!t.muted},muteddd(){this.muted=!0;var t=document.getElementById("videoElement");t.muted=!t.muted}}}),O=I,U=(a("3b63"),a("66e5")),E=a("4074"),L=a("0170"),A=a("b047"),B=a("714f"),R=Object(b["a"])(O,H,M,!1,null,"5c70eaaa",null),F=R.exports;j()(R,"components",{QPage:v["a"],QItem:U["a"],QItemSection:E["a"],QAvatar:k["a"],QBadge:y["a"],QItemLabel:L["a"],QChip:A["a"],QScrollArea:C["a"],QInput:D["a"],QFab:$["a"],QFabAction:P["a"],QBtn:g["a"],QDialog:Q["a"],QCard:x["a"]}),j()(R,"directives",{Ripple:B["a"]});var N={name:"App",components:{desktop:z,mobile:F},data(){return{}},methods:{}},J=N,V=Object(b["a"])(J,s,i,!1,null,null,null);e["default"]=V.exports;j()(V,"components",{QPage:v["a"]})},"8cc5":function(t,e,a){},f0da:function(t,e,a){"use strict";a("8cc5")}}]);
//# sourceMappingURL=7.js.map