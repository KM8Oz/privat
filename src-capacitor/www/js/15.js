(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{2901:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"bg-white"},[s("div",{staticClass:"row",staticStyle:{"min-height":"inherit"}},[s("div",{staticClass:"col-9"},[s("div",{staticClass:"full-width row justify-end"},[s("q-btn",{staticClass:"q-mr-sm text-white flex items-baseline",staticStyle:{"margin-bottom":"-10vh","z-index":"5",height:"5vh"},attrs:{rounded:"",dense:"","no-caps":"",icon:"o_flag",flat:"",align:"right"},on:{click:function(e){t.report=!0}}},[s("p",{staticClass:"q-ma-none"},[t._v("Жалоба")])])],1),s("div",{staticClass:"fullpage"})]),s("div",{staticClass:"col-3"},[s("div",{staticStyle:{width:"100%"}},[s("q-card",{staticClass:"text-black no-shadow"},[s("q-card-section",{staticClass:"q-ma-none q-pa-none"},[s("q-card-section",{staticClass:"q-ma-none q-pa-none"},[s("div",{staticClass:"row justify-between mt-vh-3"},[s("div",{staticClass:"row ml-vw-05"},[s("q-avatar",{attrs:{size:"5.16vh"}},[s("img",{staticClass:"bordavatar",attrs:{src:t.modelavatar}})]),t.datamodel?s("div",{staticClass:"row ml-vw-05"},[s("p",{staticClass:"text-black col-12 q-mb-none text-comment-18 mt-vh-05 text-nowrap"},[t._v("\n                      "+t._s(t.datamodel.modelname)+"\n                      "),s("q-badge",{staticClass:"q-ml-sm text-black-50 q-mb-none",attrs:{color:"pink-6",align:"middle"}},[s("span",{staticClass:"dot q-mr-xs bg-white"}),t._v(" live\n                      ")])],1),s("p",{staticClass:"text-grey-8 col-12 cuttext text-nowrap text-comment-14 q-mb-none h-vh-3"},[t._v("@"+t._s(t.datamodel.UuserId.username))])]):t._e()],1)]),s("div",{staticClass:"row text-max2-14 ml-vw-05 q-ma-none"},[s("p",{staticClass:"text-comment-14 q-ma-none"},[t._v(t._s(t.streamDesc))])]),s("p",{staticClass:"text-black cuttext text-comment-14 mb-1 q-ma-none h-mc ml-vw-05"},[t._v(t._s(t.tags))]),s("p",{staticClass:"text-black cuttext text-comment-14 mb-1 q-ma-none h-mc ml-vw-05"},[t._v("У вас "+t._s(t.userToken)+" токенов, Стоимость стрима "+t._s(t.sumPrivat)+" в минуту")])]),s("div",{staticClass:"row mt-vh-1 ml-vw-05"},[s("q-btn",{staticClass:"ml-vw-05",staticStyle:{height:"min(5vh,30px)"},attrs:{dense:"",rounded:"",outline:"",color:"pink-6","no-caps":""},on:{click:function(e){t.giftDialog=!0}}},[s("p",{staticClass:"q-ma-none q-pa-none text-comment-14 nowarp"},[t._v("Подарить токены")])])],1)],1),s("q-separator")],1)],1),s("q-scroll-area",{ref:"chatscroll",staticClass:"comdial ml-vw-1 q-pa-none h-vh-72",attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},t._l(t.datachat,(function(e){return s("div",{key:e.date,staticClass:"text-white",staticStyle:{width:"95%"}},[1==e.ismodel?s("div",{staticClass:"q-ma-none row flexchat"},[s("b",{staticClass:"text-pink-6 text-comment-18"},[t._v(t._s(e.name)+":")]),s("p",{staticClass:"text-comment-14 text-pink-6 q-ma-none"},[t._v("\n              "+t._s(e.text)+"\n            ")])]):s("div",{staticClass:"q-ma-none row flexchat"},[s("b",{staticClass:"text-grey text-comment-18"},[t._v(t._s(e.name)+":")]),s("p",{staticClass:"text-black text-comment-14 q-ma-none"},[t._v("\n              "+t._s(e.text)+"\n            ")])])])})),0),s("div",{staticClass:"vw-25 row absolute-bottom-right"},[s("q-input",{staticClass:"text-white bg-white col-10",attrs:{label:"Ваше сообщение"},model:{value:t.chat_send,callback:function(e){t.chat_send=e},expression:"chat_send"}}),s("q-btn",{staticClass:"col-2 q-mt-md",attrs:{flat:""},on:{click:function(e){return t.send_comment()}}},[s("q-icon",{staticClass:"mb0",attrs:{color:"grey",name:"mdi-send"}})],1)],1)],1)]),s("q-dialog",{model:{value:t.giftDialog,callback:function(e){t.giftDialog=e},expression:"giftDialog"}},[s("q-card",{staticClass:"text-white fit flex flex-center",staticStyle:{background:"rgba(254, 44, 85, 0.7)"}},[s("div",{staticClass:"justify-center row"},[s("q-avatar",{staticClass:"col-12",attrs:{icon:"card_giftcard"}}),s("p",{staticClass:"q-px-xl q-mt-md q-mx-lg text-center col-10",staticStyle:{"font-size":"2vw"}},[t._v("Вы можете подарить не более "+t._s(t.userToken)+" токенов")]),s("q-input",{staticClass:"col-12 q-px-xl q-mt-md q-mx-lg text-white",attrs:{rounded:"",outlined:"",dense:"",dark:"",placeholder:"Сумма токенов"},model:{value:t.amountGift,callback:function(e){t.amountGift=e},expression:"amountGift"}}),s("q-btn",{staticClass:"text-red bg-white text-weight-bold col-4 q-mr-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){return t.giftTokenDialog()}}},[t._v("Да")]),s("q-btn",{staticClass:"text-weight-bold bg-grey text-white col-4 q-ml-sm q-mt-xs",staticStyle:{"border-radius":"30px"},on:{click:function(e){t.giftDialog=!1}}},[t._v("Нет")])],1)])],1)],1)},i=[],o=(s("498a"),s("ded3")),n=s.n(o),l=s("c427"),c=s("18d6"),r={name:"VideoPlayer",components:{},props:{options:{type:Object,default(){return{}}}},data(){return{hls:null,chat_send:null,madels:95,sub:"sub",report:!1,muted:!0,link:null,datachat:[],chatmess:null,datamodel:null,chatplayer:null,offline:!1,load:!0,giftDialog:!1,amountGift:null,userToken:null,streamDesc:null,tags:null,target:null,sum:null,sumPrivat:null,cMode:!1,botDesk:null,botTime:null,modelavatar:"https://cdn.quasar.dev/img/boy-avatar.png",thumbStyle:{display:"none"},barStyle:{display:"none"},videoOptions:{source:{type:"application/x-mpegURL",src:"https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8",withCredentials:!1},live:!0,preload:!0}}},computed:n()({player(){return this.$refs.streamplayer.player}},mapState(["pcm"])),sockets:{cl_newMassage:function(t){let e={text:t.text,date:t.date,name:t.name,models:t.models,ismodel:t.ismodel};this.datachat.push(e),setTimeout((()=>{this.$refs.chatscroll.setScrollPosition(this.$refs.chatscroll.scrollSize)}),500)},cl_sendMeBalance:function(t){this.userToken=t.balance},cl_getPrivateinfo:function(t){this.videoOptions.source.src=t.src,this.chatplayer=t.src},cl_getstreaminfo:function(t){this.streamDesc=t.streamDesc,this.tags=t.tags,this.target=t.target,this.sum=t.sum,this.sumPrivat=t.sumPrivat,this.cMode=t.cMode,this.botDesk=t.botDesk,this.botTime=t.botTime},cl_getuseravatar:function(t){this.modelavatar="ok"==t.status?t.avatar:"https://cdn.quasar.dev/img/boy-avatar.png"}},beforeMount(){this.$socket.emit("s_getPrivateinfo",{token:this.pcm.user.tk,modelid:this.$route.params.modelid,userid:this.pcm.user.id}),this.$socket.emit("s_getstreaminfo",{token:this.pcm.user.tk,modelid:this.$route.params.modelid}),this.$socket.emit("s_getuseravatar",{userid:this.$route.params.modelid}),Object(l["a"])({method:"post",url:"/models_one",data:{modelid:this.$route.params.modelid}}).then((t=>{this.datamodel=null,this.datamodel=t.data})),Object(l["a"])({method:"get",url:"/balance",headers:{"x-access-token":this.pcm.user.tk}}).then((t=>{this.userToken=t.data.balance}))},beforeDestroy(){this.link=null,this.player,this.$socket.emit("s_clouseprivate",{token:this.pcm.user.tk,modelid:this.$route.params.modelid,userid:this.pcm.user.id})},methods:{giftTokenDialog(){this.amountGift<=0||null==this.amountGift?this.$q.notify({color:"negative",message:"Неверное количество токенов"}):Object(l["a"])({method:"get",url:"/donat",headers:{"x-access-token":this.pcm.user.tk,model:this.$route.params.modelid,amount:this.amountGift}}).then((t=>{"ok"==t.data.status?(this.$q.notify({color:"green",message:"Подарок отправлен"}),this.giftDialog=!1):this.$q.notify({color:"negative",message:"Что-то пошло не так!"})}))},send_comment(){null!=this.chat_send&&""!=this.chat_send&&" "!=this.chat_send&&this.chat_send.trim()?(this.$socket.emit("s_streamchatsend",{username:c["a"].getItem("username"),modelid:this.$route.params.modelid,textmess:this.chat_send},(t=>console.log("message sended:",t))),this.chat_send=null):this.$q.notify({color:"pink-6",message:"Сообщение пустое"})}}},m=r,d=(s("805f"),s("2877")),u=s("9989"),h=s("9c40"),p=s("f09f"),v=s("a370"),g=s("cb32"),b=s("58a8"),f=s("eb85"),x=s("4983"),q=s("27f9"),_=s("0016"),k=s("24e8"),w=s("eebe"),C=s.n(w),y=Object(d["a"])(m,a,i,!1,null,"caa00668",null);e["default"]=y.exports;C()(y,"components",{QPage:u["a"],QBtn:h["a"],QCard:p["a"],QCardSection:v["a"],QAvatar:g["a"],QBadge:b["a"],QSeparator:f["a"],QScrollArea:x["a"],QInput:q["a"],QIcon:_["a"],QDialog:k["a"]})},7862:function(t,e,s){},"805f":function(t,e,s){"use strict";s("7862")}}]);
//# sourceMappingURL=15.js.map